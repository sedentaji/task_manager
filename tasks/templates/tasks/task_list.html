{% extends 'tasks/base.html' %}

{% block content %}
    <div class="search-container">
        <form method="get" action="{% url 'task_list' %}">
            <input type="text" name="search" placeholder="Search tasks by title..." value="{{ search_query }}">
            <button type="submit" class="btn">Search</button>
            {% if search_query %}
                <a href="{% url 'task_list' %}" class="btn btn-secondary">Clear</a>
            {% endif %}
        </form>
    </div>

    <div class="task-list">
        <h2>All Tasks</h2>
        {% if tasks %}
            {% for task in tasks %}
                <div class="task-item {% if task.status == 'Overdue' %}overdue{% elif task.status == 'Due Today' %}due-today{% else %}upcoming{% endif %}">
                    <h3>{{ task.title }}</h3>
                    <p>{{ task.description|truncatechars:100 }}</p>
                    <p>Due Date: {{ task.due_date }}<br>Status: {{ task.status }}</p>
                    <div>
                        <a href="{% url 'task_detail' task.pk %}" class="btn">View</a>
                        <a href="{% url 'task_update' task.pk %}" class="btn">Edit</a>
                        <a href="{% url 'task_delete' task.pk %}" class="btn btn-danger">Delete</a>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>No tasks available.</p>
        {% endif %}
    </div>
{% endblock %}
